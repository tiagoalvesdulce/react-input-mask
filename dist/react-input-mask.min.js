!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):e.ReactInputMask=t(e.React,null)}(this,function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t;var a={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},r="_";function i(e,t,n){if(t===undefined&&(t=r),null==n&&(n=a),!e||"string"!=typeof e)return{maskChar:t,formatChars:n,mask:null,prefix:null,lastEditablePos:null,permanents:[]};var s="",o="",i=[],u=!1,l=null;return e.split("").forEach(function(e){u||"\\"!==e?(u||!n[e]?(i.push(s.length),s.length===i.length-1&&(o+=e)):l=s.length+1,s+=e,u=!1):u=!0}),{maskChar:t,formatChars:n,prefix:o,mask:s,lastEditablePos:l,permanents:i}}function u(e,t){return-1!==e.permanents.indexOf(t)}function l(e,t,n){var s=e.mask,o=e.formatChars;if(!n)return!1;if(u(e,t))return s[t]===n;var a=o[s[t]];return new RegExp(a).test(n)}function p(e,t){return t.split("").every(function(t,n){return u(e,n)||!l(e,n,t)})}function f(e,t){var n=e.maskChar,s=e.prefix;if(!n){for(;t.length>s.length&&u(e,t.length-1);)t=t.slice(0,t.length-1);return t.length}for(var o=s.length,a=t.length;a>=s.length;a--){var r=t[a];if(!u(e,a)&&l(e,a,r)){o=a+1;break}}return o}function h(e,t){return f(e,t)===e.mask.length}function c(e,t){var n=e.maskChar,s=e.mask,o=e.prefix;if(!n){for((t=g(e,"",t,0)).length<o.length&&(t=o);t.length<s.length&&u(e,t.length);)t+=s[t.length];return t}if(t)return g(e,c(e,""),t,0);for(var a=0;a<s.length;a++)u(e,a)?t+=s[a]:t+=n;return t}function m(e,t,n,s){var o=n+s,a=e.maskChar,r=e.mask,i=e.prefix,l=t.split("");if(!a){for(var p=o;p<l.length;p++)u(e,p)&&(l[p]="");return n=Math.max(i.length,n),l.splice(n,o-n),t=l.join(""),c(e,t)}return l.map(function(t,s){return s<n||s>=o?t:u(e,s)?r[s]:a}).join("")}function g(e,t,n,s){var o=e.mask,a=e.maskChar,r=e.prefix,i=n.split(""),p=h(e,t),f=function(t,n){return!a||!u(e,n)||t!==a};return!a&&s>t.length&&(t+=o.slice(t.length,s)),i.every(function(n){for(;h=n,u(e,i=s)&&h!==o[i];){if(s>=t.length&&(t+=o[s]),!f(n,s))return!0;if(++s>=o.length)return!1}var i,h;return!l(e,s,n)&&n!==a||(s<t.length?a||p||s<r.length?t=t.slice(0,s)+n+t.slice(s+1):(t=t.slice(0,s)+n+t.slice(s),t=c(e,t)):a||(t+=n),++s<o.length)}),t}function k(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(){return setTimeout(e,0)})(e)}return function(a){function r(e){var s;n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(n(o(o(s=a.call(this,e)||this)),"lastCursorPos",null),"focused",!1),"isDOMElement",function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:1===e.nodeType&&"string"==typeof e.nodeName}),"getInputDOMNode",function(){var e=s.input;return e?s.isDOMElement(e)?e:t.findDOMNode(e):null}),"getInputValue",function(){var e=s.getInputDOMNode();return e?e.value:null}),"setInputValue",function(e){var t=s.getInputDOMNode();t&&(s.value=e,t.value=e)}),"getLeftEditablePos",function(e){for(var t=e;t>=0;--t)if(!u(s.maskOptions,t))return t;return null}),"getRightEditablePos",function(e){for(var t=s.maskOptions.mask,n=e;n<t.length;++n)if(!u(s.maskOptions,n))return n;return null}),"setCursorToEnd",function(){var e=f(s.maskOptions,s.value),t=s.getRightEditablePos(e);null!==t&&s.setCursorPos(t)}),"setSelection",function(e,t){void 0===t&&(t=0);var n=s.getInputDOMNode();if(n){var o=e+t;if("selectionStart"in n&&"selectionEnd"in n)n.selectionStart=e,n.selectionEnd=o;else{var a=n.createTextRange();a.collapse(!0),a.moveStart("character",e),a.moveEnd("character",o-e),a.select()}}}),"getSelection",function(){var e=s.getInputDOMNode(),t=0,n=0;if("selectionStart"in e&&"selectionEnd"in e)t=e.selectionStart,n=e.selectionEnd;else{var o=document.selection.createRange();o.parentElement()===e&&(t=-o.moveStart("character",-e.value.length),n=-o.moveEnd("character",-e.value.length))}return{start:t,end:n,length:n-t}}),"getCursorPos",function(){return s.getSelection().start}),"setCursorPos",function(e){s.setSelection(e,0),k(function(){s.setSelection(e,0)}),s.lastCursorPos=e}),"isFocused",function(){return s.focused}),"getStringValue",function(e){return e||0===e?e+"":""}),"getModifyMaskedValueConfig",function(){var e=s.maskOptions,t=e.mask,n=e.maskChar,o=e.permanents,a=e.formatChars;return{mask:t,maskChar:n,permanents:o,alwaysShowMask:!!s.props.alwaysShowMask,formatChars:a}}),"onKeyDown",function(e){s.backspaceOrDeleteRemoval=null,"function"==typeof s.props.onKeyDown&&s.props.onKeyDown(e);var t=e.key,n=e.ctrlKey,o=e.metaKey,a=e.defaultPrevented;if(!(n||o||a||"Backspace"!==t&&"Delete"!==t)){var r=s.getSelection();if(!("Backspace"===t&&r.end>0||"Delete"===t&&s.value.length>r.start))return;s.backspaceOrDeleteRemoval={key:t,selection:s.getSelection()}}}),"onChange",function(e){var t=o(o(s)).beforePasteState,n=s.props.beforeChange,a=s.maskOptions,r=a.mask,i=a.maskChar,u=a.lastEditablePos,l=a.prefix,p=s.getInputValue();if(t)return s.beforePasteState=null,void s.pasteText(t.value,p,t.selection,e);var h=s.value,v=s.getInputDOMNode();try{"function"==typeof v.matches&&v.matches(":-webkit-autofill")&&(h="")}catch(I){}var d,O,y=s.getSelection(),b=y.end,C=r.length,w=p.length,P=h.length;if(s.backspaceOrDeleteRemoval){var M="Delete"===s.backspaceOrDeleteRemoval.key;if(p=s.value,y=s.backspaceOrDeleteRemoval.selection,b=y.start,s.backspaceOrDeleteRemoval=null,y.length)p=m(s.maskOptions,p,y.start,y.length);else if(y.start<l.length||!M&&y.start===l.length)b=l.length;else{var E=M?s.getRightEditablePos(b):s.getLeftEditablePos(b-1);null!==E&&(i||(p=p.substr(0,f(s.maskOptions,p))),p=m(s.maskOptions,p,E,1),b=E)}}else if(w>P){var D=w-P,R=y.end-D;O=p.substr(R,D),b=R<u&&(1!==D||O!==r[R])?s.getRightEditablePos(R):R,p=p.substr(0,R)+p.substr(R+D),d=m(s.maskOptions,p,R,C-R),d=g(s.maskOptions,d,O,b),p=g(s.maskOptions,h,O,b),1!==D||b>=l.length&&b<u?(b=Math.max(f(s.maskOptions,d),b))<u&&(b=s.getRightEditablePos(b)):b<u&&b++}else if(w<P){var S=C-w,V=(O=p.substr(0,y.end))===h.substr(0,y.end);d=m(s.maskOptions,h,y.end,S),i&&(p=g(s.maskOptions,d,O,0)),d=m(s.maskOptions,d,y.end,C-y.end),d=g(s.maskOptions,d,O,0),V?b<l.length&&(b=l.length):(b=Math.max(f(s.maskOptions,d),b))<u&&(b=s.getRightEditablePos(b))}if(p=c(s.maskOptions,p),O||(O=null),"function"==typeof n){var x=n(p,b,O,s.getModifyMaskedValueConfig());p=x.value,b=x.cursorPosition}s.setInputValue(p),"function"==typeof s.props.onChange&&s.props.onChange(e),s.isWindowsPhoneBrowser?k(function(){s.setSelection(b,0)}):s.setCursorPos(b)}),"onFocus",function(e){var t=s.props.beforeChange,n=s.maskOptions,o=n.mask,a=n.prefix;if(s.focused=!0,o)if(s.value)f(s.maskOptions,s.value)<s.maskOptions.mask.length&&s.setCursorToEnd();else{var r=c(s.maskOptions,a),i=c(s.maskOptions,r),u=f(s.maskOptions,i),l=s.getRightEditablePos(u);if("function"==typeof t){var p=t(i,l,null,s.getModifyMaskedValueConfig());i=p.value,l=p.cursorPosition}var h=i!==e.target.value;h&&(e.target.value=i),s.value=i,h&&"function"==typeof s.props.onChange&&s.props.onChange(e),s.setCursorPos(l)}"function"==typeof s.props.onFocus&&s.props.onFocus(e)}),"onBlur",function(e){var t=s.props.beforeChange,n=s.maskOptions.mask;if(s.focused=!1,n&&!s.props.alwaysShowMask&&p(s.maskOptions,s.value)){var o="";if("function"==typeof t)o=t(o,null,null,s.getModifyMaskedValueConfig()).value;var a=o!==s.getInputValue();a&&s.setInputValue(o),a&&"function"==typeof s.props.onChange&&s.props.onChange(e)}"function"==typeof s.props.onBlur&&s.props.onBlur(e)}),"onMouseDown",function(e){if(!s.focused&&document.addEventListener){s.mouseDownX=e.clientX,s.mouseDownY=e.clientY,s.mouseDownTime=(new Date).getTime();document.addEventListener("mouseup",function t(e){if(document.removeEventListener("mouseup",t),s.focused){var n=Math.abs(e.clientX-s.mouseDownX),o=Math.abs(e.clientY-s.mouseDownY),a=Math.max(n,o),r=(new Date).getTime()-s.mouseDownTime;(a<=10&&r<=200||a<=5&&r<=300)&&s.setCursorToEnd()}})}"function"==typeof s.props.onMouseDown&&s.props.onMouseDown(e)}),"onPaste",function(e){"function"==typeof s.props.onPaste&&s.props.onPaste(e),e.defaultPrevented||(s.beforePasteState={value:s.getInputValue(),selection:s.getSelection()},s.setInputValue(""))}),"pasteText",function(e,t,n,o){var a=s.props.beforeChange,r=n.start;n.length&&(e=m(s.maskOptions,e,r,n.length));var i,p,f,h,c,k,v,d=(i=s.maskOptions,p=t,f=r,h=i.mask,c=i.maskChar,k=p.split(""),v=f,k.every(function(e){for(;n=e,u(i,t=f)&&n!==h[t];)if(++f>=h.length)return!1;var t,n;return(l(i,f,e)||e===c)&&f++,f<h.length}),f-v);if(e=g(s.maskOptions,e,t,r),r+=d,r=s.getRightEditablePos(r)||r,"function"==typeof a){var O=a(e,r,t,s.getModifyMaskedValueConfig());e=O.value,r=O.cursorPosition}s.setInputValue(e),o&&"function"==typeof s.props.onChange&&s.props.onChange(o),s.setCursorPos(r)}),"handleRef",function(e){s.input=e,"function"==typeof s.props.inputRef&&s.props.inputRef(e)});var r=e.mask,h=e.maskChar,v=e.formatChars,d=e.defaultValue,O=e.value,y=e.alwaysShowMask;return s.hasValue=null!=O,s.maskOptions=i(r,h,v),null==d&&(d=""),null==O&&(O=d),O=s.getStringValue(O),s.maskOptions.mask&&(y||O)&&(O=c(s.maskOptions,O)),s.value=O,s}var v,d,O=r.prototype;return O.componentDidMount=function(){var e,t,n;this.isWindowsPhoneBrowser=(e=new RegExp("windows","i"),t=new RegExp("phone","i"),n=navigator.userAgent,e.test(n)&&t.test(n)),this.maskOptions.mask&&this.getInputValue()!==this.value&&this.setInputValue(this.value),this.props.maxLength&&this.maskOptions.mask&&"object"==typeof console&&console.error&&console.error("react-input-mask: You shouldn't pass maxLength property to the masked input. It breaks masking and unnecessary because length is limited by the mask length.")},O.componentDidUpdate=function(){var e=this.props.beforeChange,t=this.maskOptions;if(this.hasValue=null!=this.props.value,this.maskOptions=i(this.props.mask,this.props.maskChar,this.props.formatChars),!this.maskOptions.mask)return this.backspaceOrDeleteRemoval=null,void(this.lastCursorPos=null);var n=this.lastCursorPos,s=this.maskOptions.mask&&this.maskOptions.mask!==t.mask,o=this.props.alwaysShowMask||this.isFocused(),a=this.hasValue?this.getStringValue(this.props.value):this.value;if(t.mask||this.hasValue||(a=this.getInputValue()),(s||this.maskOptions.mask&&(a||o))&&(a=c(this.maskOptions,a),s)){var r=f(this.maskOptions,a);(null===n||r<n)&&(n=h(this.maskOptions,a)?r:this.getRightEditablePos(r))}if(!this.maskOptions.mask||!p(this.maskOptions,a)||o||this.hasValue&&this.props.value||(a=""),"function"==typeof e){var u=e(a,n,null,this.getModifyMaskedValueConfig());a=u.value,n=u.cursorPosition}this.value=a,n!==this.lastCursorPos&&this.setCursorPos(n),this.maskOptions.mask&&this.getInputValue()!==this.value&&(this.setInputValue(this.value),this.forceUpdate())},O.render=function(){var t=this,o=this.props,a=(o.mask,o.alwaysShowMask,o.maskChar,o.formatChars,o.inputRef,o.CustomInput),r=(o.beforeChange,function(e,t){if(null==e)return{};var n,s,o={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(o[n]=e[n]);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(o,["mask","alwaysShowMask","maskChar","formatChars","inputRef","CustomInput","beforeChange"]));if(this.maskOptions.mask){if(!r.disabled&&!r.readOnly){["onChange","onKeyDown","onPaste","onMouseDown"].forEach(function(e){r[e]=t[e]})}null!=r.value&&(r.value=this.value)}return a?e.cloneElement(a,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},o=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),o.forEach(function(t){n(e,t,s[t])})}return e}({ref:this.handleRef,onFocus:this.onFocus,onBlur:this.onBlur},r)):e.createElement("input",s({ref:this.handleRef},r,{onFocus:this.onFocus,onBlur:this.onBlur}))},d=a,(v=r).prototype.__proto__=d&&d.prototype,v.__proto__=d,r}(e.Component)});
